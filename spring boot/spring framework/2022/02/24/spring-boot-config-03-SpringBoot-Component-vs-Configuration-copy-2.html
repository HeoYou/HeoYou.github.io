<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>[Spring-Boot] Spring-Boot 설정을 아라보자_03(Configuration Properties) - HeoYou You don't know this?</title> <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@1,500&display=swap" rel="stylesheet"> <link href="https://fonts.googleapis.com/css2?family=Fira+Sans&display=swap" rel="stylesheet"> <link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel="stylesheet"> <link rel="stylesheet" href="/assets/dist/css/style.css"> <!-- <link rel="stylesheet" href="/assets/dist/awsm.css/awsm_theme_big-stone.min.css" media="(prefers-color-scheme: dark)"> <link rel="stylesheet" href="/assets/dist/awsm.css/awsm_theme_white.min.css" media="(prefers-color-scheme: no-preference), (prefers-color-scheme: light)"> <link rel="stylesheet" href="/assets/dist/rouge/syntax-base16.dark.css" media="(prefers-color-scheme: dark)"> <link rel="stylesheet" href="/assets/dist/rouge/syntax-github.css" media="(prefers-color-scheme: no-preference), (prefers-color-scheme: light)"> --> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>[Spring-Boot] Spring-Boot 설정을 아라보자_03(Configuration Properties) | HeoYou You don’t know this?</title> <meta name="generator" content="Jekyll v3.9.1" /> <meta property="og:title" content="[Spring-Boot] Spring-Boot 설정을 아라보자_03(Configuration Properties)" /> <meta name="author" content="HeoYou" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Intro Configuration Properties를 알아보자~!" /> <meta property="og:description" content="Intro Configuration Properties를 알아보자~!" /> <link rel="canonical" href="http://localhost:4000/spring%20boot/spring%20framework/2022/02/24/spring-boot-config-03-SpringBoot-Component-vs-Configuration-copy-2.html" /> <meta property="og:url" content="http://localhost:4000/spring%20boot/spring%20framework/2022/02/24/spring-boot-config-03-SpringBoot-Component-vs-Configuration-copy-2.html" /> <meta property="og:site_name" content="HeoYou You don’t know this?" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2022-02-24T00:00:00+09:00" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="[Spring-Boot] Spring-Boot 설정을 아라보자_03(Configuration Properties)" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"HeoYou"},"dateModified":"2022-02-24T00:00:00+09:00","datePublished":"2022-02-24T00:00:00+09:00","description":"Intro Configuration Properties를 알아보자~!","headline":"[Spring-Boot] Spring-Boot 설정을 아라보자_03(Configuration Properties)","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/spring%20boot/spring%20framework/2022/02/24/spring-boot-config-03-SpringBoot-Component-vs-Configuration-copy-2.html"},"url":"http://localhost:4000/spring%20boot/spring%20framework/2022/02/24/spring-boot-config-03-SpringBoot-Component-vs-Configuration-copy-2.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <div class="content"> <header> <div class="main"> <a href="http://localhost:4000/">HeoYou You don't know this?</a> </div> <nav> <a class='' href="/">Home</a> <a class='' href="/archives.html"> Archives</a> <a class='' href="/about.html">About</a> </nav> </header> <hr class="light-hr"> <main> <div class="title"> <h1 class="title">[Spring-Boot] Spring-Boot 설정을 아라보자_03(Configuration Properties)</h1> <div class="meta"> <time datetime="2022-02-24">2022 02 24</time> </div> </div> <hr class="no-margin light-hr "> <h2 id="intro">Intro</h2> <p>Configuration Properties를 알아보자~!</p> <h2 id="1-configuration-properties">1. Configuration Properties</h2> <p>각종 설정값을 외부로 분리해낸 것</p> <ul> <li>서로 다른 환경에서도 사용할 수 있음</li> <li>애플리케이션을 새로 컴파일하지 않고 설정값을 바꿀 수 있음</li> <li>종류 <ul> <li>Java properties file</li> <li>YAML</li> <li>environment variable</li> <li>command-line argument</li> </ul> </li> </ul> <h3 id="11-외부-설정의-우선-순위">1.1. 외부 설정의 우선 순위</h3> <ol> <li>디폴트 프로퍼티</li> <li>@Configuration 클래스에 @PropertySource 로 정의된 것</li> <li>설정 파일: application.properties</li> <li>RandomValuePropertySource</li> <li>OS 환경변수</li> <li>자바 시스템 프로퍼티: System.getProperties()</li> <li>JNDI 속성: java:comp/env</li> <li>ServletContext - 초기 파라미터</li> <li>ServletConfig - 초기 파라미터</li> <li>SPRING_APPLICATION_JSON 안의 프로퍼티들</li> <li>Command-line arguments</li> <li>테스트에 사용된 프로퍼티들</li> <li>@TestPropertySource</li> <li>Devtools 글로벌 세팅: $HOME/.config/spring-boot</li> </ol> <h3 id="12-설정-파일config-data의-우선순위">1.2. 설정 파일(Config data)의 우선순위</h3> <ol> <li>JAR 패키지 안의 application.properties, application.yaml</li> <li>JAR 패키지 안의, 프로파일이 지정된 파일: application-{profile}.properties</li> <li>JAR 패키지 밖의 파일</li> <li>JAR 패키지 밖의, 프로파일이 지정된 파일</li> </ol> <h3 id="13-설정-파일config-data의-위치우선순위">1.3. 설정 파일(Config data)의 위치(우선순위)</h3> <ol> <li>classpath<br /> 1.1. classpath:/<br /> 1.2. classpath:/config</li> <li>현재 디렉토리 2.1. ./<br /> 2.2. ./config<br /> 2.3. ./config/child</li> </ol> <h4 id="설정이-중복-될-경우">설정이 중복 될 경우</h4> <ul> <li>순서대로 읽기 때문에 우선 순위가 낮은 설정이 남게 된다.</li> <li>한마디로 처음 설정은 뒤에 설정에 덮어쓰기가 된다.</li> </ul> <h2 id="2-설정-파일config-data을-읽는-방법">2. 설정 파일(Config data)을 읽는 방법</h2> <ul> <li>@Value</li> <li>Environment</li> <li>@ConfigurationProperties</li> </ul> <h3 id="21-value">2.1 @value</h3> <ul> <li>SpEL 로 프로퍼티명을 표현</li> <li>type-safe 하지 않음</li> <li>인스턴스화 이후에 주입하므로, final 쓸 수 없음</li> <li>생성자 안에서 보이지 않음 (대안: @PostConstruct)</li> <li>Relaxed binding 지원 (kebab-case only)</li> <li>meta-data 없음 (javadoc은 적용 가능)</li> </ul> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Component</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyBean</span> <span class="o">{</span>
  <span class="nd">@Value</span><span class="o">(</span><span class="s">"${name}"</span><span class="o">)</span>
  <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>

  <span class="c1">// ...</span>
<span class="o">}</span>
</code></pre></div></div> <h4 id="참고사항">참고사항</h4> <ul> <li>생성자 주입을 하지 않고 필드에 바로 주입했을 경우 값이 정상적으로 들어가지 않는다. 인스턴스가 생성된 후에 값이 들어가기 때문에 잘 확인해야한다.</li> </ul> <h2 id="2-environment">2. Environment</h2> <ul> <li>애플리케이션 컨텍스트에서 꺼내오는 방법</li> <li>Environment 빈을 가져오는 방법</li> <li> <p>눈에 잘 안들어옴</p> </li> <li>Environment 클래스를 이용해서 가져온다 <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Environment</span> <span class="n">environment</span><span class="o">;</span>
<span class="n">environment</span><span class="o">.</span><span class="na">getProperty</span><span class="o">{</span><span class="s">"{속성이름}"</span><span class="o">}</span>
</code></pre></div> </div> </li> </ul> <h2 id="3-construnctorbinding">3. ConstrunctorBinding</h2> <ul> <li>Immutable한 프로퍼티를 구현할 수 있는 방법 - 추천</li> </ul> <h2 id="결론">결론</h2> <ul> <li>@ConfigurationProperties 를 이용해서</li> <li>상수처럼, immutable 하고 type-safe 하고 명확한 프로퍼티를 만들어 사용하자</li> </ul> <div class="post-tags"> <nav class="nav-post-tags-list"> <ul class="tags"> <li><a href="/category/spring-boot/">Spring boot</a></li> <li><a href="/category/spring-framework/">Spring Framework</a></li> <li><a href="/tag/configuration-properties/">Configuration Properties</a></li> <li><a href="/tag/springframework/">SpringFramework</a></li> </ul> </nav> </div> </main> <footer> <hr class="footer-hr"> <div class="ui-flex"> <div class='wrapper-footer'> © 2022 HeoYou You don't know this? | Made with <a href="https://github.com/slashformotion/jekyll-archie">Jekyll-Archie</a> and <a href="https://jekyllrb.com">Jekyll</a> </div> </div> </footer> </div> </body> </html>
